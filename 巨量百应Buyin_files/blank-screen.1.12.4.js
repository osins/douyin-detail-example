!function(){"use strict";var P=function(){return(P=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++)for(var o in e=arguments[t])Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o]);return n}).apply(this,arguments)};function C(n,e){var t="function"==typeof Symbol&&n[Symbol.iterator];if(!t)return n;var r,o,i=t.call(n),u=[];try{for(;(void 0===e||0<e--)&&!(r=i.next()).done;)u.push(r.value)}catch(n){o={error:n}}finally{try{r&&!r.done&&(t=i.return)&&t.call(i)}finally{if(o)throw o.error}}return u}function H(){return{}}function t(n){return"object"==typeof n&&null!==n}function M(n){return"function"==typeof n}var a=function(n,e,t,r){return n.destroyAgent.set(e,t,r)};function f(n,e){return n.initSubject(e)}function U(){return Date.now()}function B(){if("object"==typeof window&&t(window))return window}function I(){if("object"==typeof document&&t(document))return document}function r(){if(B()&&M(window.PerformanceObserver))return window.PerformanceObserver}function o(n,e,t){return n=C(c(n,e),3),e=n[0],n=n[2],e(t),n}var s=function(n,e){return t(n)?P(P({},e),n):!!n&&e},i=["resource"],u=["longtask"],c=function(r,o,i){var u=r&&new r(function(n,r){n.getEntries?n.getEntries().forEach(function(n,e,t){return o(n,e,t,r)}):i&&i()});return[function(n){if(!r||!u)return i&&i();try{u.observe({entryTypes:n})}catch(n){return i&&i()}},function(n,e){if(!r||!u)return i&&i();try{var t={type:n,buffered:!0};void 0!==e&&(t.durationThreshold=e),u.observe(t)}catch(n){return i&&i()}u.observe({type:n,buffered:!1})},function(){return u&&u.disconnect()}]},l=["longtask_0",function(n,e){var t=r();t&&e(o(t,n,u))}],d=["resource_0",function(n,e){var t=r();t&&e(o(t,n,i))}],N="js_error",Y="http",G="resource_error",F="blank_screen";function z(n,e){return~p.indexOf(n.tagName)||h<e}function W(n){return{width:(n=n.getBoundingClientRect()).width,height:n.height,top:n.top}}function $(n){return n?document.querySelector(n):document.body}function J(t,r,n,o){if(void 0===r&&(r=0),void 0===n&&(n=0),void 0===o&&(o=1.5),!t||z(t,r)||o<=n)return n;var e=function(){if(!r)return 0;var n=W(t),e=n.top,n=n.height;return e>innerHeight||n<=0?0:1/(1<<r-1)}();return[].reduceRight.call(t.children,function(n,e){return J(e,r+1,n,o)},n+e)}var v=["unload_0",function(n,e){var t,r,o,i,u,c=B();c&&(t=C((r=n,o=!1,[function(n){o||(o=!0,r&&r(n))}]),1)[0],i=function(){t()},u=[],["unload","beforeunload","pagehide"].forEach(function(n){var e,t,r,o;u.push((t=n,r=i,void 0===(o=!1)&&(o=!1),(e=c).addEventListener(t,r,o),function(){e.removeEventListener(t,r,o)}))}),e(function(){u.forEach(function(n){return n()})}))}],m=["domLoad_1",function(n,e){var t,r,o,i,u,c,a=B(),f=I();a&&f&&(t=!1,r=H,a=function(){setTimeout(function(){n(),t=!0},0)},"loading"!==f.readyState?a():(u=a,void 0===(c=!(i="DOMContentLoaded"))&&(c=!1),(o=f).addEventListener(i,u,c),r=function(){o.removeEventListener(i,u,c)}),e(function(){r()},function(n){t&&n()}))}],p=["SCRIPT","STYLE","META","HEAD"],K=[N,Y,G],h=4,Q=["performance","performance_longtask","performance_timing","custom"];function V(n){var t=n.cb,e=n.screenshotUrl,r=n.window,o=n.document,i=n.mask,u=n.partialShot,c=n.quality,a=n.rootSelector;if(B()&&"Promise"in window&&Promise&&r&&o){if(r.html2canvas)return f(),0;n=o.createElement("script");n.src=e,null!==(e=o.head)&&void 0!==e&&e.appendChild(n),n.onload=f,n.onerror=function(){t()}}function f(){var e;((e=r).requestIdleCallback||function(n){return e.setTimeout(n,1)})(function(){r.html2canvas&&r.html2canvas(u&&a&&o.querySelector(a)||o.body,{scale:360/r.innerWidth,mask:i}).then(function(n){t("data:image"===(n=n.toDataURL("image/jpeg",c)).slice(0,10)?n:y())}).catch(function(){t(y())})})}}function y(n,e){void 0===n&&(n=192),void 0===e&&(e=108);var t=document.createElement("canvas");t.width=n,t.height=e;var r=t.getContext("2d");return r&&(r.fillStyle="#ffffff",r.fillRect(0,0,n,e)),t.toDataURL("image/jpeg")}var n,e,g,b=function(t,o,n,e){function r(n,e){o.forEach(function(n){return n()}),o.length=0,a&&t({ev_type:F,payload:{timestamp:a[0],score:a[1],screenshot:e,error:f,serialized_dom:function t(n,r,e){if(void 0===r&&(r=0),void 0===e&&(e=!0),!n||z(n,r))return"";var o=P(P({},W(n)),{id:n.getAttribute("id"),class:n.getAttribute("class")}),i=Object.keys(o).reduce(function(n,e){return n+("number"==typeof o[e]||o[e]?" "+e+'="'+o[e]+'"':"")},""),u=n.tagName.toLowerCase(),n=[].reduce.call(n.children,function(n,e){return n+t(e,r+1,!1)},"");return"<"+u+i+(e?' innerHeight="'+innerHeight+'"':"")+">"+n+"</"+u+">"}($(_))},overrides:{timestamp:n||a[0]}})}function i(){s&&clearTimeout(s),s=L.setTimeout(function(){l=D(function(){var n=$(_);n&&((n=J(n,0,0,b))<b?(a=[U(),n],q()):a=void 0)})},1e3)}var u,c,a,f,s,l,d,v,m,p=C(n,4),h=p[0],y=p[1],g=p[2],n=p[3],b=e.threshold,w=e.screenshot,_=e.rootSelector,p=e.autoDetect,S=e.ssUrl,E=e.quality,T=e.mask,R=e.partialShot,L=B(),k=I(),D=L.requestAnimationFrame||H,A=L.cancelAnimationFrame||H,O=C((u=performance,[c=u&&u.timing||void 0,function(){return u&&u.now?u.now():(Date.now?Date.now():+new Date)-(c&&c.navigationStart||0)},function(n){var e=(u||{}).getEntriesByType;return M(e)&&e.call(u,n)||[]},function(){var n=(u||{}).clearResourceTimings;M(n)&&n.call(u)},function(n){var e=(u||{}).getEntriesByName;return M(e)&&e.call(u,n)||[]}]),2)[1],j=0,x=!1,q=(v=function(){a&&!x&&(x=!0,w?V({cb:r.bind(null,U()),screenshotUrl:S,window:L,document:k,mask:T,partialShot:R,quality:E,rootSelector:_}):r())},function(){d||(m=U(),d=L.setTimeout(function(){d=0,(m<j?i:v)()},1e4<O()?2e3:8e3))});return o.push(n[0](function(){!x&&f&&r()})),p&&o.push(h[0](function(){var n,t,n=C((n=function(){if(B()&&M(window.MutationObserver))return window.MutationObserver}(),e=i,t=n&&new n(e),[function(n,e){t&&n&&t.observe(n,e)},function(){return t&&t.disconnect()}]),2),e=n[0],r=n[1];o.push(function(){clearTimeout(s),clearTimeout(d),A(l),r&&r()}),e(null===(e=I())||void 0===e?void 0:e.body,{subtree:!0,childList:!0}),o.push(y()[0](function(){s&&i()})),o.push(g()[0](function(){s&&i()})),i()})),[function(n){x||~Q.indexOf(n.ev_type)||(j=U(),f=function(n,e){if(-1===K.indexOf(e.ev_type))return n;if(e.ev_type===Y&&e.payload.response.status<400)return n;if(n&&K.indexOf(n.type)<K.indexOf(e.ev_type))return n;var t="";switch(e.ev_type){case N:t=e.payload.error.message;break;case Y:t=e.payload.request.url;break;case G:t=e.payload.url}return{type:e.ev_type,message:t,timestamp:U()}}(f=f&&1e4<j-f.timestamp?void 0:f,n))},i]},w="blankScreen";function _(n,e,t){var r,o,i,u=I(),c=B();u&&c&&(r=w,u=e,r=null===(c=(c=n).config())||void 0===c?void 0:c.plugins[r],(t=s(r,u)||s(t,e))&&(e=[],t=C(b(n.report.bind(n),e,[f(n,m),function(){return f(n,l)},function(){return f(n,d)},f(n,v)],t),2),o=t[0],t=t[1],n.on("report",i=function(n){return o(n),n}),e.push(function(){n.off("report",i)}),a(n,w,F,e),n.provide("detectBlankScreen",t)))}e=(null===(n=function(){if(!document)return null;if(document.currentScript)return document.currentScript;try{throw new Error}catch(n){var e=0,t=/at\s+(.*)\s+\((.*):(\d*):(\d*)\)/i.exec(n.stack),r=t&&t[2]||!1,o=t&&t[3]||0,i=document.location.href.replace(document.location.hash,""),u="",c=document.getElementsByTagName("script");for(r===i&&(t=document.documentElement.outerHTML,o=new RegExp("(?:[^\\n]+?\\n){0,"+(o-2)+"}[^<]*<script>([\\d\\D]*?)<\\/script>[\\d\\D]*","i"),u=t.replace(o,"$1").trim());e<c.length;e++){if("interactive"===c[e].readyState)return c[e];if(c[e].src===r)return c[e];if(r===i&&c[e].innerHTML&&c[e].innerHTML.trim()===u)return c[e]}return null}}())||void 0===n?void 0:n.getAttribute("src"))||"",(g=I())&&e&&((g=g.createElement("a")).href=e,"/"!==(e=g.pathname||"/")[0]&&(e="/"+e),g.href,g.protocol.slice(0,-1),g.hostname,g.search.substring(1),g.hash);var S,E,T,R,L="1.12.4";S=w,E=function(n,e){n.on("init",function(){_(n,{autoDetect:!0,threshold:1.5,screenshot:!0,mask:!1,ssUrl:n.config().pluginPathPrefix+"/screenshot.min.js",partialShot:!0,quality:.1},e)})},(T=void 0===T?function(n){if(n)return n.__SLARDAR_REGISTRY__||(n.__SLARDAR_REGISTRY__={Slardar:{plugins:[],errors:[],subject:{}}}),n.__SLARDAR_REGISTRY__.Slardar}(B()):T)&&T.plugins&&(R=S,T.plugins.filter(function(n){return n.name===R&&n.version===L})[0]||T.plugins.push({name:S,version:L,apply:E}))}();
