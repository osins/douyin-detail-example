!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).verifyCenter={})}(this,(function(e){"use strict";var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};var n={exports:{}};!function(e,n){e.exports=function(){function e(e){var t=typeof e;return null!==e&&("object"===t||"function"===t)}function n(e){return"function"==typeof e}var o=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},i=0,r=void 0,s=void 0,a=function(e,t){w[i]=e,w[i+1]=t,2===(i+=2)&&(s?s(_):O())};function c(e){s=e}function u(e){a=e}var l="undefined"!=typeof window?window:void 0,p=l||{},d=p.MutationObserver||p.WebKitMutationObserver,f="undefined"==typeof self&&"undefined"!=typeof process&&"[object process]"==={}.toString.call(process),h="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function v(){return function(){return process.nextTick(_)}}function y(){return void 0!==r?function(){r(_)}:b()}function m(){var e=0,t=new d(_),n=document.createTextNode("");return t.observe(n,{characterData:!0}),function(){n.data=e=++e%2}}function g(){var e=new MessageChannel;return e.port1.onmessage=_,function(){return e.port2.postMessage(0)}}function b(){var e=setTimeout;return function(){return e(_,1)}}var w=new Array(1e3);function _(){for(var e=0;e<i;e+=2){(0,w[e])(w[e+1]),w[e]=void 0,w[e+1]=void 0}i=0}function C(){try{var e=Function("return this")().require("vertx");return r=e.runOnLoop||e.runOnContext,y()}catch(e){return b()}}var O=void 0;function k(e,t){var n=this,o=new this.constructor(E);void 0===o[L]&&X(o);var i=n._state;if(i){var r=arguments[i-1];a((function(){return q(i,o,r,n._result)}))}else{W(n,o,e,t)}return o}function S(e){var t=this;if(e&&"object"==typeof e&&e.constructor===t){return e}var n=new t(E);return M(n,e),n}O=f?v():d?m():h?g():void 0===l?C():b();var L=Math.random().toString(36).substring(2);function E(){}var R=void 0,x=1,T=2;function j(){return new TypeError("You cannot resolve a promise with itself")}function F(){return new TypeError("A promises callback cannot return that same promise.")}function P(e,t,n,o){try{e.call(t,n,o)}catch(e){return e}}function B(e,t,n){a((function(e){var o=!1,i=P(n,t,(function(n){o||(o=!0,t!==n?M(e,n):I(e,n))}),(function(t){o||(o=!0,H(e,t))}),"Settle: "+(e._label||" unknown promise"));!o&&i&&(o=!0,H(e,i))}),e)}function N(e,t){t._state===x?I(e,t._result):t._state===T?H(e,t._result):W(t,void 0,(function(t){return M(e,t)}),(function(t){return H(e,t)}))}function V(e,t,o){t.constructor===e.constructor&&o===k&&t.constructor.resolve===S?N(e,t):void 0===o?I(e,t):n(o)?B(e,t,o):I(e,t)}function M(t,n){if(t===n){H(t,j())}else if(e(n)){var o=void 0;try{o=n.then}catch(e){return void H(t,e)}V(t,n,o)}else{I(t,n)}}function A(e){e._onerror&&e._onerror(e._result),D(e)}function I(e,t){e._state===R&&(e._result=t,e._state=x,0!==e._subscribers.length&&a(D,e))}function H(e,t){e._state===R&&(e._state=T,e._result=t,a(A,e))}function W(e,t,n,o){var i=e._subscribers,r=i.length;e._onerror=null,i[r]=t,i[r+x]=n,i[r+T]=o,0===r&&e._state&&a(D,e)}function D(e){var t=e._subscribers,n=e._state;if(0!==t.length){for(var o=void 0,i=void 0,r=e._result,s=0;s<t.length;s+=3){o=t[s],i=t[s+n],o?q(n,o,i,r):i(r)}e._subscribers.length=0}}function q(e,t,o,i){var r=n(o),s=void 0,a=void 0,c=!0;if(r){try{s=o(i)}catch(e){c=!1,a=e}if(t===s){return void H(t,F())}}else{s=i}t._state!==R||(r&&c?M(t,s):!1===c?H(t,a):e===x?I(t,s):e===T&&H(t,s))}function z(e,t){try{t((function(t){M(e,t)}),(function(t){H(e,t)}))}catch(t){H(e,t)}}var U=0;function J(){return U++}function X(e){e[L]=U++,e._state=void 0,e._result=void 0,e._subscribers=[]}function K(){return new Error("Array Methods must be provided an Array")}var Y=function(){function e(e,t){this._instanceConstructor=e,this.promise=new e(E),this.promise[L]||X(this.promise),o(t)?(this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),0===this.length?I(this.promise,this._result):(this.length=this.length||0,this._enumerate(t),0===this._remaining&&I(this.promise,this._result))):H(this.promise,K())}return e.prototype._enumerate=function(e){for(var t=0;this._state===R&&t<e.length;t++){this._eachEntry(e[t],t)}},e.prototype._eachEntry=function(e,t){var n=this._instanceConstructor,o=n.resolve;if(o===S){var i=void 0,r=void 0,s=!1;try{i=e.then}catch(e){s=!0,r=e}if(i===k&&e._state!==R){this._settledAt(e._state,t,e._result)}else if("function"!=typeof i){this._remaining--,this._result[t]=e}else if(n===te){var a=new n(E);s?H(a,r):V(a,e,i),this._willSettleAt(a,t)}else{this._willSettleAt(new n((function(t){return t(e)})),t)}}else{this._willSettleAt(o(e),t)}},e.prototype._settledAt=function(e,t,n){var o=this.promise;o._state===R&&(this._remaining--,e===T?H(o,n):this._result[t]=n),0===this._remaining&&I(o,this._result)},e.prototype._willSettleAt=function(e,t){var n=this;W(e,void 0,(function(e){return n._settledAt(x,t,e)}),(function(e){return n._settledAt(T,t,e)}))},e}();function Z(e){return new Y(this,e).promise}function G(e){var t=this;return o(e)?new t((function(n,o){for(var i=e.length,r=0;r<i;r++){t.resolve(e[r]).then(n,o)}})):new t((function(e,t){return t(new TypeError("You must pass an array to race."))}))}function $(e){var t=new this(E);return H(t,e),t}function Q(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function ee(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}var te=function(){function e(t){this[L]=J(),this._result=this._state=void 0,this._subscribers=[],E!==t&&("function"!=typeof t&&Q(),this instanceof e?z(this,t):ee())}return e.prototype.catch=function(e){return this.then(null,e)},e.prototype.finally=function(e){var t=this,o=t.constructor;return n(e)?t.then((function(t){return o.resolve(e()).then((function(){return t}))}),(function(t){return o.resolve(e()).then((function(){throw t}))})):t.then(e,e)},e}();function ne(){var e=void 0;if(void 0!==t){e=t}else if("undefined"!=typeof self){e=self}else{try{e=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}}var n=e.Promise;if(n){var o=null;try{o=Object.prototype.toString.call(n.resolve())}catch(e){}if("[object Promise]"===o&&!n.cast){return}}e.Promise=te}return te.prototype.then=k,te.all=Z,te.race=G,te.resolve=S,te.reject=$,te._setScheduler=c,te._setAsap=u,te._asap=a,te.polyfill=ne,te.Promise=te,te}()}(n);var o=n.exports,i=function(){return i=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){for(var i in t=arguments[n]){Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}}return e},i.apply(this,arguments)};function r(e,t){var n={};for(var o in e){Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o])}if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(o=Object.getOwnPropertySymbols(e);i<o.length;i++){t.indexOf(o[i])<0&&Object.prototype.propertyIsEnumerable.call(e,o[i])&&(n[o[i]]=e[o[i]])}}return n}function s(e,t,n,i){return new(n||(n=o.Promise))((function(o,r){function s(e){try{c(i.next(e))}catch(e){r(e)}}function a(e){try{c(i.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((i=i.apply(e,t||[])).next())}))}function a(e,t){var n,o,i,r,s={label:0,sent:function(){if(1&i[0]){throw i[1]}return i[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(a){return function(c){return function(a){if(n){throw new TypeError("Generator is already executing.")}for(;r&&(r=0,a[0]&&(s=0)),s;){try{if(n=1,o&&(i=2&a[0]?o.return:a[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,a[1])).done){return i}switch(o=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,o=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){s.label=a[1];break}if(6===a[0]&&s.label<i[1]){s.label=i[1],i=a;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(a);break}i[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(e){a=[6,e],o=0}finally{n=i=0}}if(5&a[0]){throw a[1]}return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}}function c(e,t,n){if(n||2===arguments.length){for(var o,i=0,r=t.length;i<r;i++){!o&&i in t||(o||(o=Array.prototype.slice.call(t,0,i)),o[i]=t[i])}}return e.concat(o||Array.prototype.slice.call(t))}function u(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n){e[o]=n[o]}}return e}"function"==typeof SuppressedError&&SuppressedError;var l=function e(t,n){function o(e,o,i){if("undefined"!=typeof document){"number"==typeof(i=u({},n,i)).expires&&(i.expires=new Date(Date.now()+864e5*i.expires)),i.expires&&(i.expires=i.expires.toUTCString()),e=encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var r="";for(var s in i){i[s]&&(r+="; "+s,!0!==i[s]&&(r+="="+i[s].split(";")[0]))}return document.cookie=e+"="+t.write(o,e)+r}}return Object.create({set:o,get:function(e){if("undefined"!=typeof document&&(!arguments.length||e)){for(var n=document.cookie?document.cookie.split("; "):[],o={},i=0;i<n.length;i++){var r=n[i].split("="),s=r.slice(1).join("=");try{var a=decodeURIComponent(r[0]);if(o[a]=t.read(s,a),e===a){break}}catch(e){}}return e?o[e]:o}},remove:function(e,t){o(e,"",u({},t,{expires:-1}))},withAttributes:function(t){return e(this.converter,u({},this.attributes,t))},withConverter:function(t){return e(u({},this.converter,t),this.attributes)}},{attributes:{value:Object.freeze(n)},converter:{value:Object.freeze(t)}})}({read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"}),p="s_v_web_id",d="/notify/sms/web/send_code",f="/notify/sms/check_code",h=String.fromCharCode.apply(null,[104,116,116,112,115,58,47,47,114,109,99,45,98,111,101,46,98,121,116,101,100,97,110,99,101,46,110,101,116]),v=["lf-rc2.yhgfb-cn-static.com","lf-rc1.yhgfb-cn-static.com","lf-cdn-tos.bytescm.com"],y=function(e){for(var t=Object.keys(e),n="",o=0;o<t.length;o++){var i=t[o],r=e[i],s="".concat(encodeURIComponent(i),"=").concat(r?encodeURIComponent(r):"");n=o>=1?"".concat(n,"&").concat(s):s}return n},m=function(e){try{return"{}"!==JSON.stringify(e)}catch(e){return!1}},g=function(e){var t=["bgColor","borderRadius","titleColor","closeIconColor","slideBgColor","slideBorderRadius","slideIconColor","slideSlotBorderRadius","slideSlotBgColor","slideSlotDescColor","slidingSlotBgColor","slidingSlotBgEndColor","refreshIconColor","refreshFontColor","feedbackIconColor","feedbackFontColor","sureBtnBgColor","sureBtnFontColor"],n={};for(var o in e){t.indexOf(o)>=0&&(n[o]=e[o])}return n},b={option:!1,moveHandler:function(e){e.preventDefault()},init:function(){var e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("test",(function(){}),t)}catch(e){}this.option=!!e&&{passive:!1}},disable:function(){document.addEventListener("touchmove",this.moveHandler,this.option),console.log("bytedance://disable_swipe")},allow:function(){document.removeEventListener("touchmove",this.moveHandler,this.option),console.log("bytedance://enable_swipe")}},w=function(e){if(w.isDone){return function(){}}function t(t){var n;"error"===(null==t?void 0:t.type)&&(null===(n=t.filename)||void 0===n?void 0:n.indexOf("rc-verifycenter/rmc-captcha"))>-1&&e(t)}return w.isDone=!0,window.addEventListener("error",t,!0),function(){window.removeEventListener("error",t,!0)}};var _,C=function(){var e=this;this.setCookieOption=function(t){t.domain&&/^([a-z0-9-]+)?(\.[a-z0-9-]+)+$/.test(t.domain)||delete t.domain,e.cookieOption=i(i({},e.cookieOption),t)},this.setOptionFp=function(t){e.optionFp=t},this.injectFpToCookie=function(){var t=l.get(p);return t&&0===t.indexOf("verify_")||(t=e.setFpToCookie()),t},this.setFpToCookie=function(t){return t=t||(null===localStorage||void 0===localStorage?void 0:localStorage.getItem(p))||function(){var e="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),t=e.length,n=(new Date).getTime().toString(36),o=[];o[8]=o[13]=o[18]=o[23]="_",o[14]="4";for(var i=0,r=void 0;i<36;i++){o[i]||(r=0|Math.random()*t,o[i]=e[19==i?3&r|8:r])}return"verify_"+n+"_"+o.join("")}(),l.remove(p),l.remove(p,{secure:!0,sameSite:"none",Partitioned:!0}),l.set(p,t,e.cookieOption),l.get(p)||(l.set(p,t,i(i({},e.cookieOption),{secure:!0,sameSite:"none",Partitioned:!0})),null===localStorage||void 0===localStorage||localStorage.setItem(p,t)),t},this.getOrSetFp=function(t){return s(e,void 0,void 0,(function(){return a(this,(function(e){return t&&t!==this.fp&&(this.fp=this.setFpToCookie(t)),[2,this.fp]}))}))},this.getFp=function(){return e.optionFp?e.optionFp:l.get(p)||(null===localStorage||void 0===localStorage?void 0:localStorage.getItem(p))||""};var t="object"==typeof window.fpCookieOption?window.fpCookieOption:{};t.domain&&/^([a-z0-9-]+)?(\.[a-z0-9-]+)+$/.test(t.domain)||delete t.domain,this.cookieOption=i({expires:60},t),this.fp=this.injectFpToCookie()},O=function(){function e(){var e=this;this.callSuccess=function(){e.successCallbacks.forEach((function(e){e({code:200,data:null,message:"验证通过"})})),e.clearCallback()},this.callClose=function(){e.closeCallbacks.forEach((function(e){e()})),e.clearCallback()},this.callError=function(t){e.captchaOptions.errorCb&&t&&(t.message="[captcha sdk] ".concat(t.message),e.captchaOptions.errorCb(t))},this.clearCallback=function(){e.closeCallbacks.length=0,e.successCallbacks.length=0},this.setCallback=function(t,n){t&&"function"==typeof t&&e.successCallbacks.push(t),n&&"function"==typeof n&&e.closeCallbacks.push(n)},this.outputParams=function(){var t=e.captchaOptions,n=t.aid,o=t.did,i=t.pageId,r=t.app_name,s=t.host,a=t.lang,c=t.viewport,u=t.baseEM,l=t.theme,p=t.verify_data,d=t.challenge_code,f=t.extraConfig;return{aid:n,did:o,pageId:i,app_name:r,host:s||"https://verify.zijieapi.com",lang:a,viewport:c,baseEM:u,challenge_code:d,hideCloseBtn:t.hideCloseBtn,theme:"object"==typeof l?JSON.stringify(l):l,verify_data:"object"==typeof p?JSON.stringify(p):p,extraConfig:"object"==typeof f?JSON.stringify(f):f}},this.options={},this.captchaOptions={},this.closeCallbacks=[],this.successCallbacks=[]}return e.prototype.setOptions=function(e){this.options=e},e.prototype.setCaptchaOptions=function(e){this.clearCallback(),"function"==typeof e.successCb&&this.successCallbacks.push(e.successCb),"function"==typeof e.closeCb&&this.closeCallbacks.push(e.closeCb),this.captchaOptions=e},e}(),k=function(e,t){var n=this;this.listen=function(){n.selfWin.addEventListener("message",n.handleListen)},this.handleListen=function(e){var t,o,i,r,s,a,c;if(e.origin===n.origin){try{var u=JSON.parse(e.data),l=u.type,p=u.data;switch(l){case"ready":null===(t=n.readyListener)||void 0===t||t.call(n,p);break;case"resize":null===(o=n.resizeListener)||void 0===o||o.call(n,p);break;case"close":null===(i=n.closeListener)||void 0===i||i.call(n,p);break;case"success":null===(r=n.successListener)||void 0===r||r.call(n,p);break;case"error":null===(s=n.errorListener)||void 0===s||s.call(n,p);break;case"log":null===(a=n.logListener)||void 0===a||a.call(n,p);break;case"verify":null===(c=n.verify)||void 0===c||c.call(n,p)}}catch(e){}}},this.on=function(e,t){switch(e){case"ready":n.readyListener=t;break;case"resize":n.resizeListener=t;break;case"close":n.closeListener=t;break;case"success":n.successListener=t;break;case"error":n.errorListener=t;break;case"log":n.logListener=t;break;case"verify":n.verify=t}},this.destory=function(){n.selfWin.removeEventListener("message",n.handleListen)},this.selfWin=window,this.otherWin=e,this.origin=t,this.listen()},S=function(){function e(e){var t=this;this.isReady=!1,this.show=function(e){return s(t,void 0,void 0,(function(){var t,n,o,r,u,l,p,d,f,m,g,w,_,C,O=this;return a(this,(function(S){return this.__temp_params__=e,t=e.root,n=e.props,o=n.myFp,r=n.myOption,u=n.myLogger,l=r.captchaOptions.disableFrameMode||2079===r.captchaOptions.aid,p=document.createElement("iframe"),t.appendChild(p),(d=document.createElement("div")).id="vc_captcha_wrapper",b.init(),b.disable(),f=this.setStyle(t,p,d,r),m="https://rmc.bytedance.com",r.captchaOptions.host&&r.captchaOptions.host.indexOf("boe-verify")>=0?m=h:r.captchaOptions.iframeHost&&(m=r.captchaOptions.iframeHost),g=new k(p.contentWindow,m),w=i({from:"iframe",fp:o.getFp(),env:JSON.stringify({screen:{w:window.screen.width,h:window.screen.height},browser:{w:window.outerWidth,h:window.outerHeight},page:{w:window.innerWidth,h:window.innerHeight},document:{width:document.documentElement.clientWidth},product_host:window.location.host||window.location.pathname,vc_version:"1.0.0.56",maskTime:Date.now(),h5_check_version:r.captchaOptions.h5_check_version})},r.outputParams()),_=function(e){b.allow(),f(e),O.myVerify.isRender=!1,O.isReady=!1},C=Date.now(),p.src=l?"about:blank":"".concat(m).concat("/verifycenter/captcha/v2","?").concat(y(function(e){var t={};for(var n in e){e[n]&&(t[n]=e[n])}return t}(w))),p.onload=function(){setTimeout((function(){return s(O,void 0,void 0,(function(){var e,n,i,s,f,h,y,m=this;return a(this,(function(a){switch(a.label){case 0:if(!1!==this.isReady){return[3,4]}e=r.captchaOptions.hideCloseBtn,g.destory(),p.parentNode===t&&t.removeChild(p),d.parentNode!==t&&t.appendChild(d),a.label=1;case 1:return a.trys.push([1,3,,4]),n=null===(y=r.captchaOptions.hostConfig)||void 0===y?void 0:y.static_domain,i=c([],v,!0),n&&i.push(n),[4,this.loadScript({domains:i,slardar:u.slardar})];case 2:return a.sent(),(s=new window.bdCaptcha.CaptchaVerify({info:{aid:w.aid,appName:w.app_name,lang:w.lang,did:w.did,fp:o.getFp()},ele:d.id,host:w.host,baseEM:w.baseEM,viewport:w.viewport,theme:r.captchaOptions.theme,hideCloseBtn:e,env:{maskTime:Date.now(),h5_check_version:r.captchaOptions.h5_check_version},successCb:function(){r.callSuccess(),!1!==r.captchaOptions.autoClose&&_(d)},verify:function(e){u.slardar.report("custom",{mustReport:!0,type:"log",name:"second_verify",level:"warn",content:e}),_(d),m.myVerify.autoRender({commonOptions:{aid:2385},secondVerifyWebOptions:{callBack:function(){r.callSuccess()},closeCallBack:function(){r.callClose()}},verify_data:e})},closeCb:function(){r.callClose(),_(d)},errorCb:function(e){r.callError(e)}})).init(),s.render(w.verify_data||w.challenge_code),[3,4];case 3:return f=a.sent(),h=(null==f?void 0:f.message)||"验证码渲染失败",r.callError({name:"render_fail",message:h}),u.slardar.report("blank_screen",{mustReport:!0,score:0,timestamp:Date.now(),error:{type:"captcha-load-error"!==f?"js_error":"resource_error",message:JSON.stringify({message:h,stack:null==f?void 0:f.stack})}},"captcha-render-fail"),this.blankScreen({container:d,hideCloseBtn:e,refresh:function(){u.slardar.reportBufferList(),t.removeChild(d),m.show(m.__temp_params__)},close:function(){r.callClose(),_(d)}}),[3,4];case 4:return l||(u.trackEvent("load_iframe",{aid:w.aid,is_success:Number(this.isReady),duration:Date.now()-C}),!1===this.isReady&&u.slardar.report("custom",{mustReport:!0,type:"log",name:"iframe_not_ready",level:"warn",content:""})),[2]}}))}))}))},g.on("ready",(function(){O.isReady=!0})),g.on("resize",(function(e){var t=e.w,n=e.h;p.style.visibility="visible",p.style.width="".concat(t,"px"),p.style.height="".concat(n,"px")})),g.on("close",(function(){g.destory(),r.callClose(),_(p)})),g.on("success",(function(){g.destory(),r.callSuccess(),!1!==r.captchaOptions.autoClose&&_(p)})),g.on("verify",(function(e){u.slardar.report("custom",{mustReport:!0,type:"log",name:"second_verify",level:"warn",content:e}),_(p),O.myVerify.autoRender({commonOptions:{aid:2385},secondVerifyWebOptions:{callBack:function(){r.callSuccess()},closeCallBack:function(){r.callClose()}},verify_data:e})})),g.on("log",(function(e){u.log(e)})),g.on("error",(function(e){r.callError(e)})),[2]}))}))},this.loadScript=function(e){var n,i=e.slardar,r=e.domains;if(null===(n=window.bdCaptcha)||void 0===n?void 0:n.CaptchaVerify){return o.Promise.resolve(0)}var s=w((function(e){var t;i.report("js_error",{mustReport:!0,error:{name:"验证码渲染失败",message:e.message,stack:null===(t=e.error)||void 0===t?void 0:t.stack,filename:e.filename},breadcrumbs:[]},"global-error")})),a=function(e){if(0===e.length){return s(),o.Promise.reject("captcha-load-error")}var n=e.pop();return t._loadScript({url:"https://".concat(n).concat("/obj/rc-verifycenter/rmc-captcha/@latest/captcha.js"),slardar:i}).catch((function(){return a(e)}))};return a(r).then((function(){s()}))},this.setStyle=function(e,t,n,o){var i=o.captchaOptions,r=i.showMode,s=i.disableSetBodyHidden,a=i.theme;t.style.border="none",t.style.display="block",t.style.visibility="hidden",e.style.display="block","mask"===r&&(e.style.zIndex="111111",e.style.position="fixed",e.style.width="100%",e.style.height="100%",e.style.backgroundColor="rgba(0, 0, 0, 0.512)",e.style.margin="auto",e.style.top="0px",e.style.bottom="0px",e.style.left="0px",e.style.right="0px",n.style.borderRadius="6px",n.style.overflow="hidden",n.style.position="absolute",n.style.left="50%",n.style.top="50%",n.style.transform="translate(-50%, -50%)",t.style.borderRadius="6px",t.style.overflow="hidden",t.style.position="absolute",t.style.left="50%",t.style.top="50%",t.style.transform="translate(-50%, -50%)",(null==a?void 0:a.borderRadius)&&(n.style.borderRadius=a.borderRadius,t.style.borderRadius=a.borderRadius));var c=document.body.style.overflow;return s||(document.body.style.overflow="hidden"),function(t){t.parentNode===e&&e.removeChild(t),e.style.display="none",s||(document.body.style.overflow=c)}},this.blankScreen=function(e){var t=e.container,n=e.hideCloseBtn,o=e.refresh,i=e.close;t.innerHTML='<div style="background: #fff;padding: 10px;display:flex;width:310px;font-size:14px;box-sizing:border-box;">\n            '.concat(n?"":'<div id="vc_captcha_err_close" style="position:absolute;right:0px;top:0px;padding:5px;cursor: pointer;">\n                <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M12.44 2.50738C12.5702 2.3772 12.7812 2.3772 12.9114 2.50738L13.3828 2.97878C13.513 3.10895 13.513 3.32001 13.3828 3.45018L8.90446 7.92853L13.3828 12.4069C13.513 12.537 13.513 12.7481 13.3828 12.8783L12.9114 13.3497C12.7812 13.4799 12.5702 13.4799 12.44 13.3497L7.96165 8.87134L3.48331 13.3497C3.35314 13.4799 3.14208 13.4799 3.01191 13.3497L2.5405 12.8783C2.41033 12.7481 2.41033 12.537 2.5405 12.4069L7.01885 7.92853L2.5405 3.45018C2.41033 3.32001 2.41033 3.10895 2.5405 2.97878L3.01191 2.50738C3.14208 2.3772 3.35314 2.3772 3.48331 2.50738L7.96165 6.98572L12.44 2.50738Z" fill="#999999"></path></svg>\n            </div>','\n            验证码资源加载失败，点击\n            <div style="display:inline-flex;align-items:center;color:#6e9fff;cursor: pointer;" id="vc_captcha_err_fresh">\n                <svg fill="#6e9fff" width="20px" height="20px" viewBox="0 0 20 20" version="1.1" xmlns="http://www.w3.org/2000/svg"><path d="M10,4 C12.0559549,4 13.9131832,5.04358655 15.0015086,6.68322231 L15,5.5 C15,5.22385763 15.2238576,5 15.5,5 C15.7761424,5 16,5.22385763 16,5.5 L16,8.5 C16,8.77614237 15.7761424,9 15.5,9 L12.5,9 C12.2238576,9 12,8.77614237 12,8.5 C12,8.22385763 12.2238576,8 12.5,8 L14.5842317,8.00000341 C13.7999308,6.20218044 12.0143541,5 10,5 C7.23857625,5 5,7.23857625 5,10 C5,12.7614237 7.23857625,15 10,15 C11.749756,15 13.3431487,14.0944653 14.2500463,12.6352662 C14.3958113,12.4007302 14.7041063,12.328767 14.9386423,12.4745321 C15.1731784,12.6202971 15.2451415,12.9285921 15.0993765,13.1631281 C14.0118542,14.9129524 12.0990688,16 10,16 C6.6862915,16 4,13.3137085 4,10 C4,6.6862915 6.6862915,4 10,4 Z" fill-rule="nonzero"></path></svg>\n                刷新\n            </div>\n            重新操作。\n        </div>');var r=document.getElementById("vc_captcha_err_fresh"),s=document.getElementById("vc_captcha_err_close");r&&(r.onclick=function(){o()}),s&&(s.onclick=function(){i()})},this.myVerify=e}return e.prototype._loadScript=function(e){var t=e.url,n=e.slardar,i=document.getElementsByTagName("head")[0],r=document.createElement("script");r.crossOrigin="anonymous",i.appendChild(r),r.src=t;var s=Date.now();return new o.Promise((function(e,o){r.onload=function(){n.report("resource",{name:t,entryType:"resource",startTime:s,duration:Date.now()-s},"captcha-load"),e(0)},r.onerror=function(){n.report("resource_error",{type:"script",url:t},"captcha-load"),o("captcha-load-error")}}))},e}(),L=function(){function e(e){this.lists=[],this.bufferList=[];var t="true"===function(e){try{return sessionStorage.getItem(e)}catch(e){}return null}("__VC_MUST_REPORT__")?100:Math.ceil(100*Math.random()),n=t>90?1:-1;this.shouldReport={js_error:1,blank_screen:1,custom:100===t?1:-1,resource:n,resource_error:n},this.commonParams={user_id:e,bid:"verify_center_cn",view_id:"/_1",session_id:"0-a-1-2-c",env:"production",url:window.location.href,sdk_version:"1.12.1",sdk_name:"SDK_SLARDAR_WEB",context:{}}}return e.prototype.init=function(e){var t,n,o,i,r,s=(null===(n=null===(t=e.captchaOptions)||void 0===t?void 0:t.logConfig)||void 0===n?void 0:n.domain)||"mon.zijieapi.com",a=(null===(o=e.commonOptions)||void 0===o?void 0:o.aid)||e.aid,c=(null===(i=e.commonOptions)||void 0===i?void 0:i.did)||e.did;this.reportUrl="https://".concat(s,"/monitor_browser/collect/batch/"),this.commonParams.release=null===(r=e.captchaOptions)||void 0===r?void 0:r.h5_check_version,this.commonParams.device_id=c?String(c):"0",this.commonParams.context={belong:"vc",vc_version:"1.0.0.56",appId:a?String(a):"unknown"}},e.prototype.setFp=function(e){this.commonParams.user_id=e},e.prototype.setContext=function(e,t){t&&(this.commonParams.context[e]=t)},e.prototype._report=function(e){try{if(this.reportUrl&&e.length>0){var t=new XMLHttpRequest;t.open("POST",this.reportUrl,!0),t.setRequestHeader("Content-type","application/json"),t.send(JSON.stringify({ev_type:"batch",list:e})),e.length=0}}catch(e){console.error("[vc slardar._report]",e)}},e.prototype.report=function(e,t,n){var o=this;try{if(!this.shouldReport[e]){return}var i=JSON.parse(JSON.stringify(this.commonParams));if(i.timestamp=+new Date,i.context.mark=n,"custom"===e){var r=t,s=r.content;"object"==typeof s&&(r.content=JSON.stringify(s)),r.categories&&"captchaRender"===r.name&&(r.categories=function(e){if(Math.random()>.5){return{}}var t={theme:e.theme?"true":"false"},n={aid:!0,did:!0,iid:!0,fp:!0,verify_data:!0,theme:!0},o=e.theme||{};for(var i in e){n[i]||"function"==typeof e[i]||o[i]||(t[i]="object"==typeof e[i]?JSON.stringify(e[i]):String(e[i]))}return t}(r.categories))}t.mustReport||1===this.shouldReport[e]?this.lists.push({ev_type:e,payload:t,common:i}):(this.bufferList.push({ev_type:e,payload:t,common:i}),this.bufferList.length>15&&this.bufferList.shift()),t.mustReport=void 0,clearTimeout(this.timeout),this.timeout=setTimeout((function(){o._report(o.lists)}))}catch(e){console.error("[vc slardar.report]",e)}},e.prototype.reportBufferList=function(){this._report(this.bufferList)},e}(),E="turing_verify_sdk",R=function(){function e(e){var t=this;this.loseEvents=[],this.loadScript=function(e){var n;if(null===(n=window.bdCaptcha)||void 0===n?void 0:n.CaptchaVerify){return o.Promise.resolve(0)}var i=["lf-cdn-tos.bytescm.com","lf-rc1.yhgfb-cn-static.com"];e&&(i[1]=e);var r=function(e){return t._loadScript(e.pop()).catch((function(t){return 0===e.length?o.Promise.reject(t):r(e)}))};return r(i).then((function(e){t.slardar.report("resource",e,"collect-load")})).catch((function(e){return t.slardar.report("resource_error",e,"collect-load"),o.Promise.reject("[captcha sdk] load collect-base.js error")}))},this._loadScript=function(e){var t=document.getElementsByTagName("head")[0];return new o.Promise((function(n,o){var i="https://".concat(e,"/obj/rc-verifycenter/verifycenter-collect/1.0.0.7-5.1.16/collect-base.js"),r=document.createElement("script");r.src=i,r.async=!0;var s=Date.now();r.onload=function(){n({name:i,entryType:"resource",startTime:s,duration:Date.now()-s})},r.onerror=function(){o({type:"script",url:i})},t.appendChild(r)}))},this.init=function(e){return s(t,void 0,void 0,(function(){var t,n,o,i,r,s,c,u,l,p;return a(this,(function(a){switch(a.label){case 0:if(window.verifyCenterTea){return[3,4]}t=(null===(c=e.captchaOptions)||void 0===c?void 0:c.trackConfig)||{},n=(null===(u=e.captchaOptions)||void 0===u?void 0:u.hostConfig)||{},a.label=1;case 1:return a.trys.push([1,3,,4]),this.slardar.init(e),[4,this.loadScript(null==n?void 0:n.static_domain)];case 2:return a.sent(),o={app_id:2018,channel:"cn"},t.channel_domain&&(o.channel_domain=t.channel_domain),window.verifyCenterTea.init(o),i=(null===(l=e.commonOptions)||void 0===l?void 0:l.aid)||e.aid,r={_staging_flag:0,evtParams:{h5_check_version:null===(p=e.captchaOptions)||void 0===p?void 0:p.h5_check_version,vc_version:"1.0.0.56",aid:i,fp:this.fp,product_host:window.location.host,product_path:window.location.pathname}},this.fp&&(r.user_unique_id=this.fp),window.verifyCenterTea.config(r),window.verifyCenterTea.start(),this.loseEvents.forEach((function(e){"event"===e[0]&&window.verifyCenterTea.event(E,e[1]),"config"===e[0]&&window.verifyCenterTea.config(e[1])})),this.loseEvents=[],[3,4];case 3:return s=a.sent(),console.error(s),[3,4];case 4:return[2]}}))}))},this.setFp=function(e){t.fp=e,t.slardar.setFp(e),window.verifyCenterTea&&window.verifyCenterTea.config({user_unique_id:e})},this.fp=e.getFp(),this.slardar=new L(this.fp)}return e.prototype.setParam=function(e,t){var n,o;window.verifyCenterTea?window.verifyCenterTea.config({evtParams:(o={},o[e]=t,o)}):this.loseEvents.unshift(["config",{evtParams:(n={},n[e]=t,n)}])},e.prototype.trackEvent=function(e,t){var n=i({key:"h5_"+e},t);if(window.verifyCenterTea){try{window.verifyCenterTea.event(E,n)}catch(e){}}else{this.loseEvents.push(["event",n])}},e.prototype.log=function(e){try{if("h5_feedback"===e.key&&(this.slardar.report("custom",{mustReport:!0,name:"feedback",type:"event",categories:{option:e.option},content:JSON.stringify(e)}),this.slardar.reportBufferList()),!window.verifyCenterTea){return void this.loseEvents.push(["event",e])}window.verifyCenterTea.event(E,e)}catch(e){console.error(e)}},e}(),x=function(){var e=this;this.loadScript=function(){var e=document.getElementsByTagName("head")[0];return new o.Promise((function(t,n){var o=document.createElement("script");o.src="https://lf-cdn-tos.bytescm.com/obj/rc-verifycenter/second-valid-web/1.3.2/index.js",o.async=!0,o.onload=function(){t(0)},o.onerror=function(){n()},e.appendChild(o)}))},this.show=function(t){return s(e,void 0,void 0,(function(){return a(this,(function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,this.loadScript()];case 1:return e.sent(),new window.AccountSecondVerifySDK(t).render(),[3,3];case 2:return e.sent(),[3,3];case 3:return[2]}}))}))}},T=function(e,t){var n=this;this.init=function(e){void 0===e&&(e={}),n.myLogger.init(e),n.myOptions.setOptions(e);var t=e.captchaOptions;(null==t?void 0:t.fpCookieOption)&&(n.myFp.setCookieOption(t.fpCookieOption),m(t.fpCookieOption)&&n.myFp.setFpToCookie(n.myFp.getFp()))},this.renderCaptcha=function(e){return s(n,void 0,void 0,(function(){var t,n,o,s,c,u,l,p,d,f,h,v,y,b,w,_,C;return a(this,(function(a){if(this.isRender){return t=e.captchaOptions,o=(n=e).successCb,s=n.closeCb,o||s?this.myOptions.setCallback(o,s):t&&this.myOptions.setCallback(t.successCb,t.closeCb),[2]}if(e.aid?c=e:(u=this.myOptions.options,l=u.commonOptions,p=void 0===l?{}:l,d=u.captchaOptions,f=void 0===d?{}:d,h=r(u,["commonOptions","captchaOptions"]),y=(v=e).commonOptions,b=v.captchaOptions,w=r(v,["commonOptions","captchaOptions"]),c=i(i(i(i(i(i({},h),p),f),y),b),w)),this.myLogger.slardar.setContext("appId",String(c.aid)),c.did&&(this.myLogger.slardar.commonParams.device_id=String(c.did)),function(e){if(void 0===e&&(e={}),"[object Object]"!==Object.prototype.toString.call(e)){throw console.error("Options must be an object"),new Error("Options must be an object")}if("number"!=typeof e.aid){throw new Error("The parameter aid is required and of type int")}}(c),function(e){if(e.ele=e.ele||"captcha_container",e.zIndex=e.zIndex||"111111",e.webdriver=String(window.navigator.webdriver),e.host=e.mainHost||e.host,e.did&&"0"===e.did&&delete e.did,!e.theme){var t=g(e);m(t)&&(e.theme=t)}}(c),this.myLogger.slardar.report("custom",{name:"captchaRender",type:"event",categories:c,content:""}),this.myOptions.setCaptchaOptions(c),c.fp&&this.myFp.setOptionFp(c.fp),c.fpCookieOption&&this.myFp.setCookieOption(c.fpCookieOption),c.verify_data){_=c.verify_data;try{(C="string"==typeof _?JSON.parse(_):_).log_id&&this.myLogger.setParam("shark_log_id",C.log_id),this.myLogger.setParam("is_decision",1),(C.fp||C.Fp)&&(this.myFp.getOrSetFp(C.fp||C.Fp),this.myLogger.setFp(C.fp))}catch(e){}}var O,k;return this.myLogger.trackEvent("init",{stage:"verifycenterRender"}),this.isRender=!0,this.myIframe.show({root:(O=c.ele,k=document.getElementById(O),k||((k=document.createElement("div")).id=O,document.body.appendChild(k)),k.style.display="block",k),props:{myFp:this.myFp,myOption:this.myOptions,myLogger:this.myLogger}}),[2]}))}))},this.renderSecondVerifyWeb=function(e){return s(n,void 0,void 0,(function(){var t,n,o,r;return a(this,(function(s){return t=e.commonOptions,n=e.verify_data,o=e.secondVerifyWebOptions,r=i(i(i(i(i({},this.myOptions.options.commonOptions),this.myOptions.options.secondVerifyWebOptions),t),o),{postPc:n.subtype||"mobile_sms_verify",fp:this.myFp.getFp()}),"mobile_sms_verify"===n.subtype||"mobile_up_sms_verify"===n.subtype||"mobile_voice_sms_verify"===n.subtype?r.account=n.mobile:"email_verify"===n.subtype?r.account=n.email:"mobile_sms_check_or_verify"===n.subtype&&(r.origin_decision=n.detail,r.is_login=n.login_status),n.verify_ticket&&(r.commonParams={verify_ticket:n.verify_ticket}),n.channel_mobile&&n.sms_content&&(r.channel_mobile=n.channel_mobile,r.sms_content=n.sms_content),function(e){if(void 0===e&&(e={}),"[object Object]"!==Object.prototype.toString.call(e)){throw console.error("Options must be an object"),new Error("Options must be an object")}if("number"!=typeof e.aid){throw new Error("The parameter aid is required and of type int")}}(r),(new x).show(r),[2]}))}))},this.autoRender=function(e){var t=e.verify_data,o=e.commonOptions,s=e.captchaOptions,a=e.secondVerifyWebOptions,c=r(e,["verify_data","commonOptions","captchaOptions","secondVerifyWebOptions"]);if(e.verify_data){try{var u="string"==typeof t?JSON.parse(t):t;1e4==+u.code?n.renderCaptcha(i(i({},c),{commonOptions:o,captchaOptions:s,verify_data:u})):2e4==+u.code&&n.renderSecondVerifyWeb({commonOptions:o,secondVerifyWebOptions:a,verify_data:u})}catch(e){throw new Error("The parameter verify_data is required")}}},this.closeCaptcha=function(){var e;if(n.isRender=!1,null===(e=n.myOptions.captchaOptions)||void 0===e?void 0:e.ele){var t=document.getElementById(n.myOptions.captchaOptions.ele);t&&(document.body.classList&&document.body.classList.remove&&document.body.classList.remove("captcha-disable-scroll"),t.style.display="none")}},this.myOptions=e,this.myFp=t,this.myLogger=new R(t),this.myIframe=new S(this),this.isRender=!1};!function(e){e[e.captcha=1]="captcha",e[e.secondVerify=2]="secondVerify"}(_||(_={}));var j=function(){function e(e,t,n){this.myOptions=e,this.myVerify=t,e.options.smsOptions&&(this.sms=new n(e.options))}return e.prototype.render=function(e){var t=this,n=this.myOptions.options,o=n.commonOptions,r=n.captchaOptions,s=n.secondVerifyWebOptions;this.myVerify.autoRender({commonOptions:o,captchaOptions:i(i({},r),{successCb:function(e){var n,o;null===(n=null==r?void 0:r.successCb)||void 0===n||n.call(r,e),null===(o=t.onsuccess)||void 0===o||o.call(t,e,_.captcha)},closeCb:function(){var e,n;null===(e=null==r?void 0:r.closeCb)||void 0===e||e.call(r),null===(n=t.onclose)||void 0===n||n.call(t,_.captcha)}}),secondVerifyWebOptions:i(i({},s),{callBack:function(e){var n,o;null===(n=null==s?void 0:s.callBack)||void 0===n||n.call(s,e),null===(o=t.onsuccess)||void 0===o||o.call(t,e,_.secondVerify)},closeCallBack:function(){var e,n;null===(e=null==s?void 0:s.closeCallBack)||void 0===e||e.call(s),null===(n=t.onclose)||void 0===n||n.call(t,_.captcha)}}),verify_data:e})},e.prototype.getFp=function(){var e;return(null===(e=this.myOptions.captchaOptions)||void 0===e?void 0:e.fp)||this.myVerify.myFp.getFp()},e}(),F=function(e,t,n){void 0===n&&(n={});var r=n.headers?i({"Content-Type":"application/json"},n.headers):{"Content-Type":"application/json"};return function(e){var t=e.url,n=e.method,i=e.data,r=e.config;return new o.Promise((function(e,o){var s=new XMLHttpRequest;s.onreadystatechange=function(){if(s.readyState===s.DONE){if(s.status>=200&&s.status<300){var t={},n=s.response||s.responseText,i=s.getResponseHeader("Content-Type")||s.getResponseHeader("content-type");if(i&&-1!==i.indexOf("application/json")){try{t=JSON.parse(n)}catch(e){}}else{t=n}setTimeout((function(){e(t)}),0)}else{o(new TypeError("Network request failed, status: ".concat(s.status)))}}},s.onerror=function(){setTimeout((function(){o(new TypeError("Network request failed, occur error"))}),0)},s.ontimeout=function(){setTimeout((function(){o(new TypeError("Network request failed, timeout"))}),0)},s.onabort=function(){setTimeout((function(){o(new DOMException("Aborted","AbortError"))}),0)};var a=t;if((null==r?void 0:r.params)&&(a="".concat(a,"?").concat(y(r.params))),s.open(n,a,!0),(null==r?void 0:r.timeout)&&"number"==typeof r.timeout?s.timeout=r.timeout:s.timeout=5e3,null==r?void 0:r.headers){for(var c=r.headers,u=0,l=Object.keys(c);u<l.length;u++){var p=l[u];s.setRequestHeader(p,c[p])}}(null==r?void 0:r.withCredentials)&&(s.withCredentials=r.withCredentials),"POST"===n.toUpperCase()&&i?s.send(JSON.stringify(i)):s.send(null)}))}({url:e,method:"POST",data:t,config:i(i({},n),{headers:r})})},P=function(e){var t=this;this.host="",this.setHost=function(e){t.host=e},this.handler=function(e){return 0===e.code?e:o.Promise.reject(e)},this.sendCode=function(e,n){return void 0===n&&(n={}),s(t,void 0,void 0,(function(){return a(this,(function(t){return[2,F("".concat(this.host).concat(d),e,{params:n}).then(this.handler)]}))}))},this.validateCode=function(e){return s(t,void 0,void 0,(function(){return a(this,(function(t){return[2,F("".concat(this.host).concat(f),e).then(this.handler)]}))}))},e&&("/"===e.slice(-1)&&(e=e.slice(0,-1)),this.host=e)},B=function(e,t,n,o){e.autoRender({verify_data:t,captchaOptions:{successCb:function(){n()},closeCb:function(){o()}},secondVerifyWebOptions:{callBack:function(){n()},closeCallBack:function(){o()}}})},N=function(e,t,n){var o=n.myFp.getFp(),i=[],r=!1,s=function(){r=!0,i.forEach((function(e){return e()}))},a=function(){var n=new XMLHttpRequest;e.withCredentials&&(n.withCredentials=e.withCredentials),e.timeout&&(n.timeout=e.timeout),n.onload=function(){!function(t){e.getResponseHeader=function(){return t.getResponseHeader.apply(t,arguments)},e.getAllResponseHeaders=function(){return t.getAllResponseHeaders.apply(t,arguments)};for(var n=function(n){Object.defineProperty(e,n,{get:function(){return t[n]},enumerable:!0})},o=0,i=["readyState","status","statusText","response","responseText","responseType","responseURL","responseXML"];o<i.length;o++){n(i[o])}}(n),s()},n.ontimeout=function(){s()},n.onerror=function(){s()},n.onabort=function(){s()},t.forEach((function(e){var t=[].slice.call(e.arguments);"addEventListener"!==e.fnName&&"removeEventListener"!==e.fnName&&n[e.fnName].apply(n,t)}))},c=function(){var t=e.onreadystatechange,o=e.onload,c=e.onloadend;t&&(e.onreadystatechange=function(){var n=arguments,o=function(){t.apply(e,n)};!r&&e.readyState===XMLHttpRequest.DONE&&e.status>=200&&e.status<300?i.push(o):o()}),e.onload=function(){var t=arguments,c=function(){o&&o.apply(e,t)};e.status>=200&&e.status<300?(r||i.push(c),function(){if(e.status>=200&&e.status<300){var t=void 0;try{e.getAllResponseHeaders().indexOf("bdturing-verify")>=0&&(t=e.getResponseHeader("bdturing-verify"))}catch(e){}t?B(n,t,a,s):s()}else{s()}}()):c()},c&&(e.onloadend=function(){var t=arguments,n=function(){c.apply(e,t)};!r&&e.status>=200&&e.status<300?i.push(n):n()})},u={};t.forEach((function(t){var n,s,a=[].slice.call(t.arguments);switch(t.fnName){case"addEventListener":case"removeEventListener":var l=a[0];["readystatechange","load","loadend"].indexOf(l)>=0?"addEventListener"===t.fnName?(u[l]||(u[l]=[]),null===(n=u[l])||void 0===n||n.push({origin:t.origin,args:a})):u[l]&&(u[l]=null===(s=u[l])||void 0===s?void 0:s.filter((function(e){return e.args[1]!==a[1]}))):t.origin.apply(e,a);break;case"open":var p=a[1],d=p.indexOf("?")>=0,f="verifyFp=".concat(o,"&fp=").concat(o);a[1]=d?"".concat(p,"&").concat(f):"".concat(p,"?").concat(f),t.origin.apply(e,a);break;case"send":Object.keys(u).forEach((function(t){var n;null===(n=u[t])||void 0===n||n.forEach((function(n){var o=n.origin,s=n.args,a=s[1];s[1]=function(){var n=arguments;switch(t){case"readystatechange":!r&&e.readyState===XMLHttpRequest.DONE&&e.status>=200&&e.status<300?i.push((function(){a.apply(e,n)})):a.apply(e,arguments);break;case"load":case"loadend":!r&&e.status>=200&&e.status<300?i.push((function(){a.apply(e,n)})):a.apply(e,arguments)}},o.apply(e,s)}))})),c(),t.origin.apply(e,a);break;default:t.origin.apply(e,a)}}))},V=function(e,t){var n=function(e){var t=e.reduce((function(e,t){return t&&e.push(new RegExp(t)),e}),[]);return function(e){return t.some((function(t){return t.test(e)}))}}(e);!function(e,t){var n=window.XMLHttpRequest.prototype,o=n.open,i=n.setRequestHeader,r=n.overrideMimeType,s=n.send,a=n.addEventListener,c=n.removeEventListener;n._vc_intercepted||(n._vc_intercepted=!0,n.open=function(t,n){try{var i="string"==typeof n?n:n.toString();if(!e(i)){return o.apply(this,arguments)}this._vc_status=1,this._vc_actionList=[],this._vc_actionList.push({origin:o,fnName:"open",arguments:arguments})}catch(e){return o.apply(this,arguments)}},n.overrideMimeType=function(){if(1!==this._vc_status){return r.apply(this,arguments)}this._vc_actionList.push({origin:r,fnName:"overrideMimeType",arguments:arguments})},n.setRequestHeader=function(){if(1!==this._vc_status){return i.apply(this,arguments)}this._vc_actionList.push({origin:i,fnName:"setRequestHeader",arguments:arguments})},n.addEventListener=function(){if(1!==this._vc_status){return a.apply(this,arguments)}this._vc_actionList.push({origin:a,fnName:"addEventListener",arguments:arguments})},n.removeEventListener=function(){if(1!==this._vc_status){return c.apply(this,arguments)}this._vc_actionList.push({origin:c,fnName:"removeEventListener",arguments:arguments})},n.send=function(){if(1!==this._vc_status){return s.apply(this,arguments)}this._vc_actionList.push({origin:s,fnName:"send",arguments:arguments}),N(this,this._vc_actionList,t),delete this._vc_status,delete this._vc_actionList})}(n,t),function(e,t){if(!window._vc_intercepted_fetch){window._vc_intercepted_fetch=!0;var n=window.fetch;window.fetch=function(){for(var i=[],r=0;r<arguments.length;r++){i[r]=arguments[r]}var s,a=i[0];return s=a instanceof URL?a.toString():a instanceof Request?a.url:a,e(s)?new o.Promise((function(e,o){var r=t.myFp.getFp(),a=s.indexOf("?")>=0,u="verifyFp=".concat(r,"&fp=").concat(r);s=a?"".concat(s,"&").concat(u):"".concat(s,"?").concat(u);var l=c([],i,!0);l[0]instanceof URL?l[0].search=new URL(s).search:l[0]instanceof Request||(l[0]=s),n.apply(void 0,l).then((function(n){var o=function(){e(n)};if(n.ok){try{for(var r=void 0,s=n.headers.keys(),a=0,c=s;a<c.length;a++){if("bdturing-verify"===c[a]){r=n.headers.get("bdturing-verify");break}}r?B(t,r,(function(){e(window.fetch.apply(window,i))}),o):o()}catch(e){o()}}else{o()}})).catch(o)})):n.apply(void 0,i)}}}(n,t)},M=new O,A=new C,I=new T(M,A),H=function(e,t){return function(){function n(t){var n;this.myRequest=new P,this.options=i(i({},t),e.options),(null===(n=this.options.smsOptions)||void 0===n?void 0:n.host)&&this.myRequest.setHost(this.options.smsOptions.host)}return n.prototype.sendCode=function(e,n){var r=e.mobile;return s(this,void 0,void 0,(function(){var e,c,u,l,p,d,f,h,v,y,m,g,b,w,_,C,O,k,S=this;return a(this,(function(L){switch(L.label){case 0:e=this.options,c=e.commonOptions,u=e.smsOptions,l=e.captchaOptions,p=e.secondVerifyWebOptions,d=Object.assign(i({app_id:c.aid},u),n),f=d.app_id,h=d.channel_id,v=d.scene,y=d.code_type,m=d.language,g=d.event_type,b=d.uid,w=d.template_id,L.label=1;case 1:return L.trys.push([1,4,,5]),[4,t.myFp.getFp()];case 2:return _=L.sent(),[4,this.myRequest.sendCode({mobile:r,app_id:f,channel_id:h,scene:v,code_type:y,language:m,event_type:g,uid:b,template_id:w,verifyFp:_,fp:_},{verifyFp:_,fp:_})];case 3:return C=L.sent(),"PASS"===(O=C.data).decision?[2,C]:[2,new o.Promise((function(e,o){var u=function(){return s(S,void 0,void 0,(function(){var t,i;return a(this,(function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),[4,this.sendCode({mobile:r},n)];case 1:return t=s.sent(),e(t),[3,3];case 2:return i=s.sent(),o(i),[3,3];case 3:return[2]}}))}))};t.autoRender({verify_data:O.decision,commonOptions:c,captchaOptions:i(i({},l),{autoClose:!0,successCb:function(){return s(S,void 0,void 0,(function(){return a(this,(function(e){return"function"==typeof(null==l?void 0:l.successCb)&&l.successCb("success"),u(),[2]}))}))},closeCb:function(){o(C)}}),secondVerifyWebOptions:i(i({},p),{callBack:function(){u()},closeCallBack:function(){o(C)}})})}))];case 4:return k=L.sent(),[2,o.Promise.reject(k)];case 5:return[2]}}))}))},n.prototype.validateCode=function(e,t){var n=e.mobile,o=e.code;return s(this,void 0,void 0,(function(){var e,r,s,c,u,l;return a(this,(function(a){return e=this.options,r=e.commonOptions,s=e.smsOptions,c=Object.assign(i({app_id:r.aid},s),t),u=c.app_id,l=c.scene,[2,this.myRequest.validateCode({mobile:n,app_id:u,scene:l,code:o})]}))}))},n}()}(M,I),W=window.getCaptchaWebId=A.getOrSetFp,D=window.initVerifyOptions=I.init,q=window.renderCaptcha=I.renderCaptcha,z=window.autoRender=I.autoRender,U=window.renderSecondVerifyWeb=I.renderSecondVerifyWeb,J=window.SMS=H,X=window.initVerifyCenter=function(e){var t=new O;return t.setOptions(e),new j(t,I,H)},K=window.closeCaptcha=I.closeCaptcha,Y=I.renderCaptcha;window.verifySDK={renderCaptcha:q,closeCaptcha:K,getCaptchaWebId:W,initVerifyOptions:D,renderSecondVerifyWeb:U,autoRender:z,SMS:J,initVerifyCenter:X,init:function(e){e.interceptPathList;var t=r(e,["interceptPathList"]),n=new O,o=new C;n.setOptions(t);var i=new T(n,o);e.interceptPathList&&V(e.interceptPathList,i)},log:function(e){return I.myLogger.log(e)}},window.renderCaptcha&&"function"==typeof window.renderCaptcha.trigger&&window.renderCaptcha.trigger(I.renderCaptcha),"function"==typeof window.mountCaptchaCallback&&window.mountCaptchaCallback(),e.SMS=J,e.autoRender=z,e.closeCaptcha=K,e.default=Y,e.getCaptchaWebId=W,e.initVerifyCenter=X,e.initVerifyOptions=D,e.renderCaptcha=q,e.renderSecondVerifyWeb=U,Object.defineProperty(e,"__esModule",{value:!0})}));